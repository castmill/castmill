
/*
 * ============================================================================
 *   LG ELECTRONICS INC., SEOUL, KOREA
 *   Copyright(c) 2024 by LG Electronics Inc.
 *
 *   Author          : signagesupport@lge.com
 *   Modified Date   : 2024-05-08
 *   Release Version : 1.4240508
 *
 *   See ./doc/index.html for more detail
 * ============================================================================
 */
cordova.define("cordova/plugin/custom",function(e,a,t){function c(){}var o=window.PalmSystem?e("cordova/plugin/webos/service"):{Request:function(e,a){"function"==typeof a.onFailure&&a.onFailure({returnValue:!1,errorCode:"NOT_WEBOS",errorText:"PalmSystem Not Available. Cordova is not installed?"})}},n={"1.0":["getPowerOnOffHistory","changePassword","getwebOSVersion","disableApplication","setPowerOnStatus","getPowerOnStatus","setWhiteBalanceRGB","getWhiteBalanceRGB","getCustomJSVersion"],"2.0":["getKAM","setKAM","getApplicationInfo","switchApplication","setMaster","setSlave","setAvSync","setAvSyncSpeaker","setAvSyncBypass","getAvSync","getAvSyncSpeaker","getAvSyncBypass","addUSBAttachEventListener","removeUSBAttachEventListener"],"3.0":["getWoWLAN","setWoWLAN","getNativePortraitMode","setNativePortraitMode","setNoSignalImageStatus","getNoSignalImageStatus","clearBrowsingData","enableScreenShareApp"],3.2:["setEnterpriseCode","getPortControl","setPortControl"],"4.0":[],4.1:[],"5.0":[],"6.0":[],"7.0":[],"8.0":[],"9.0":[]},l={USBAttachEventListener:null},s={webOSVersion:-2},R="commercial",O="hotelMode",r="network",u="option",E="sound",C="picture",p="lock",f="enableKAM",d="password",b="siAppOrientation",A="screenRotation",S="wolwowlOnOff",M="powerOnStatus",N="powerOnOffHistory",g="avSync",m="avSyncSpeaker",_="avSyncBypassInput",I="noSignalImage",v="pictureMode",P="systemPin",k="blockedPortList";c.ERROR_CODE={COMMON:{OLD_WEBOS_VERSION:"OLD_WEBOS_VERSION",UNSUPPORTED_API:"UNSUPPORTED_API",BAD_PARAMETERS:"BAD_PARAMETERS",INTERNAL_ERROR:"INTERNAL_ERROR",NOT_MONITORING:"NOT_MONITORING",MEDIA_ERROR:"MEDIA_ERROR"},CONFIGURATION:{INVALID_PASSWORD_FORMAT:"BAD_PARAMETERS",ACCESS_DENIED:"ACCESS_DENIED",INVALID_CONFIG:"INVALID_CONFIGURATION"},APPLICATION:{SETTINGS_ERROR:"SETTINGS_ERROR",NOT_INSTALLED:"NOT_INSTALLED"}},c.CLEARBROWSINGDATATYPES={ALL:"all",APPCACHE:"appcache",CACHE:"cache",CHANNELIDS:"channelIDs",COOKIES:"cookies",FILESYSTEMS:"fileSystems",INDEXEDDB:"indexedDB",LOCALSTORAGE:"localStorage",SERVICEWORKERS:"serviceWorkers",WEBSQL:"webSQL"},c.AVSYNC={ON:"on",OFF:"off"},c.AVSYNCBYPASS={ON:"on",OFF:"off"},c.NOSIGNALIMAGE={ON:"on",OFF:"off"},c.POWERONSTATUS={POWERON:"power_on",STANDBY:"stand_by",LASTSTATUS:"lst"},c.APPLICATION={ZIP_TYPE:"commercial.signage.signageapplauncher",IPK_TYPE:"com.lg.app.signage",EXTERNAL_HDMI:"com.webos.app.hdmi1",EXTERNAL_HDMI1:"com.webos.app.hdmi1",EXTERNAL_HDMI2:"com.webos.app.hdmi2",EXTERNAL_HDMI3:"com.webos.app.hdmi3",EXTERNAL_HDMI4:"com.webos.app.hdmi4",EXTERNAL_RGB:"com.webos.app.externalinput.rgb",EXTERNAL_DVI:"com.webos.app.hdmi2",EXTERNAL_DP:"com.webos.app.hdmi3",EXTERNAL_OPS:"com.webos.app.hdmi4",SCREEN_SHARE:"com.webos.app.miracast"},c.NATIVEPORTRAIT={OFF:"off",DEGREE_90:"90",DEGREE_180:"180",DEGREE_270:"270"};var T={checkPlatformSupportedThisAPI:function(e){for(var a in n)for(var t in n[a])if(n[a][t]===e)return parseFloat(a)<=s.webOSVersion||parseFloat(a);return!1}},D={checkParametersValidation:function(e,a,t){if("object"!=typeof e||"object"!=typeof a||"string"!=typeof t)return null;for(var n in e)if(a[t]===e[n])return!0;return!1},checkMulltiParametersValidation:function(e,a,t){if("object"!=typeof e||"object"!=typeof a||"string"!=typeof t||"object"!=typeof a[t])return null;a[t].length;for(var n in a[t])for(var i=0;i<e.length;i++)if(a[t][n]!==e[i])return!1;return!0},checkMissingParameters:function(e,a){if("object"!=typeof e||null==e)return!1;for(var t=0;t<a.length;t++)if(!1===e.hasOwnProperty(a[t])||void 0===e[a[t]]||null===e[a[t]])return!1;return!0}},y={callSuccessCallback:function(e,a){"function"==typeof e&&("object"==typeof a?(a.returnValue&&delete a.returnValue,e(a)):e())},callFailureCallback:function(e,a,t,n){"function"==typeof e&&(a.returnValue&&delete a.returnValue,-1===a.errorCode?(-1<a.errorText.indexOf("Unknown method")||-1<a.errorText.indexOf("Service does not exist"))&&(a.errorCode=c.ERROR_CODE.COMMON.UNSUPPORTED_API):(void 0!==a.errorCode&&null!==a.errorCode||(a.errorCode=t),void 0!==a.errorText&&null!==a.errorText||(a.errorText=n)),e(a))}},F={setValue:function(e,a,t,n){o.Request("luna://com.webos.service.commercial.signage.storageservice/settings/",{method:"set",parameters:{category:e,settings:a},onSuccess:function(e){"function"==typeof t&&(delete e.returnValue,t(e))},onFailure:function(e){"function"==typeof n&&(delete e.returnValue,n(e))}})},setValueBySettingsService:function(e,a,t,n){o.Request("palm://com.webos.settingsservice",{method:"setSystemSettings",parameters:{category:e,settings:a},onSuccess:function(e){"function"==typeof t&&(delete e.returnValue,t(e))},onFailure:function(e){"function"==typeof n&&(delete e.returnValue,n(e))}})},getValue:function(e,a,t,n){o.Request("luna://com.webos.service.commercial.signage.storageservice/settings/",{method:"get",parameters:{category:e,keys:a},onSuccess:function(e){"function"==typeof t&&(delete e.returnValue,t(e.settings))},onFailure:function(e){"function"==typeof n&&(delete e.returnValue,n(e))}})},getValueBySettingsService:function(e,a,t,n){o.Request("palm://com.webos.settingsservice",{method:"getSystemSettings",parameters:{category:e,keys:a},onSuccess:function(e){"function"==typeof t&&(delete e.returnValue,t(e.settings))},onFailure:function(e){"function"==typeof n&&(delete e.returnValue,n(e))}})}};function w(a,t,n){var i;i=function(){var e=T.checkPlatformSupportedThisAPI(a);-1!==s.webOSVersion?!1!==e?!0===e||"number"!=typeof e?n(!0):y.callFailureCallback(t,{},c.ERROR_CODE.COMMON.OLD_WEBOS_VERSION,"webOS Signage "+s.webOSVersion.toFixed(1)+" doesn't support "+a+" API. webOS Signage version should be later than "+e.toFixed(1)+"."):y.callFailureCallback(t,{},c.ERROR_CODE.COMMON.BAD_PARAMETERS,"Cannot found called API in CustomJS."):y.callFailureCallback(t,{},c.ERROR_CODE.COMMON.INTERNAL_ERROR,"Unknown webOS Signage version.")},-2===s.webOSVersion?o.Request("luna://com.webos.service.systemservice/osInfo/",{method:"query",parameters:{parameters:["webos_release_codename"]},onSuccess:function(e){delete e.returnValue,-1!==(s=e).webos_release_codename.indexOf("deua")||-1!==s.webos_release_codename.indexOf("denali")||-1!==s.webos_release_codename.indexOf("dreadlocks")?o.Request("luna://com.webos.service.commercial.signage.storageservice",{method:"getOnOffTimeSchedule",parameters:{},onComplete:function(e){e.settings&&e.settings.hasOwnProperty("onOffTimeSchedule")?s.webOSVersion=3.2:s.webOSVersion=3,i()}}):(-1!==s.webos_release_codename.indexOf("ponytail")||-1!==s.webos_release_codename.indexOf("pallini")?s.webOSVersion=9:-1!==s.webos_release_codename.indexOf("negroni")?s.webOSVersion=8:-1!==s.webos_release_codename.indexOf("number1")||-1!==s.webos_release_codename.indexOf("napoleon")?s.webOSVersion=7:-1!==s.webos_release_codename.indexOf("libertyspikes")||-1!==s.webos_release_codename.indexOf("lager")?s.webOSVersion=6:-1!==s.webos_release_codename.indexOf("jhericurl")?s.webOSVersion=5:-1!==s.webos_release_codename.indexOf("geumsan")?s.webOSVersion=4.1:-1!==s.webos_release_codename.indexOf("genepi")||-1!==s.webos_release_codename.indexOf("goldilocks")||-1!==s.webos_release_codename.indexOf("galliano")?s.webOSVersion=4:-1!==s.webos_release_codename.indexOf("webos-master")?s.webOSVersion=6:s.webOSVersion=-1,i())},onFailure:function(e){function a(e,a){return-1!==e.indexOf(a)}!0===a(navigator.userAgent,"Web0S")||!0===a(navigator.userAgent,"WebAppManager")?a(navigator.userAgent,"AppleWebKit/537.41")?(s.webOSVersion=1,i()):a(navigator.userAgent,"AppleWebKit/538.2")&&(s.webOSVersion=2,i()):(s.webOSVersion=-1,i())}}):i()}function h(t,n,e){e.videoEl&&"object"==typeof e.videoEl?3<e.videoEl.readyState?e.videoEl.mediaId&&"string"==typeof e.videoEl.mediaId?t(e.videoEl.mediaId):n({errorCode:c.ERROR_CODE.COMMON.INTERNAL_ERROR,errorText:"Cannot found video element."}):n({returnValue:!1,errorCode:c.ERROR_CODE.COMMON.INTERNAL_ERROR,errorText:"Video is not loaded yet. Try again after video is loaded."}):o.Request("luna://com.webos.service.commercial.signage.storageservice/video/",{method:"getMediaID",onSuccess:function(e){e.hasOwnProperty("id")?t(e.id):n({returnValue:!1,errorCode:c.ERROR_CODE.COMMON.INTERNAL_ERROR,errorText:"Failed to check media id value."})},onFailure:function(e){var a=document.getElementsByTagName("video")[0];a&&t(a.mediaId),n(e)}})}c.prototype.Configuration={getCustomJSVersion:function(e,a){w("getCustomJSVersion",a,function(){y.callSuccessCallback(e,{version:"1.4240508"})})},getPortControl:function(a,t,e){w("getPortControl",t,function(){F.getValue(R,[k],function(e){"string"==typeof e.blockedPortList&&(e.blockedPortList=parseInt(e.blockedPortList)),y.callSuccessCallback(a,{blockedPortList:e.blockedPortList})},function(e){y.callFailureCallback(t,e,c.ERROR_CODE.COMMON.INTERNAL_ERROR,"Failed to get AvSync Bypass status.")})})},setPortControl:function(a,t,n){w("setPortControl",t,function(){if(!1!==D.checkMissingParameters(n,["blockedPortList"])){for(var e=0;e<n.blockedPortList.length;e++)n.blockedPortList[e].blockedPort=n.blockedPortList[e].blockedPort.toString();F.setValue(R,n,function(e){y.callSuccessCallback(a)},function(e){y.callFailureCallback(t,e,c.ERROR_CODE.COMMON.INTERNAL_ERROR,"Failed to set white balance settings.")})}else y.callFailureCallback(t,{},c.ERROR_CODE.COMMON.BAD_PARAMETERS,"Missing required parameters.")})},setEnterpriseCode:function(a,t,e){w("setEnterpriseCode",t,function(){!1!==D.checkMissingParameters(e,["enterpriseCode"])?F.setValue(R,e,function(e){y.callSuccessCallback(a)},function(e){y.callFailureCallback(t,e,c.ERROR_CODE.COMMON.INTERNAL_ERROR,"Failed to set white balance settings.")}):y.callFailureCallback(t,{},c.ERROR_CODE.COMMON.BAD_PARAMETERS,"Missing required parameters.")})},clearBrowsingData:function(a,t,e){w("clearBrowsingData",t,function(){!1!==D.checkMissingParameters(e,["types"])?!1!==D.checkMulltiParametersValidation(c.CLEARBROWSINGDATATYPES,e,"types")?o.Request("palm://com.palm.webappmanager/",{method:"clearBrowsingData",parameters:e,onSuccess:function(e){y.callSuccessCallback(a)},onFailure:function(e){y.callFailureCallback(t,e,c.ERROR_CODE.COMMON.INTERNAL_ERROR,"Failed to clear browsing data.")}}):y.callFailureCallback(t,{},c.ERROR_CODE.COMMON.BAD_PARAMETERS,"Invalid parameters."):y.callFailureCallback(t,{},c.ERROR_CODE.COMMON.BAD_PARAMETERS,"Missing required parameters.")})},setWhiteBalanceRGB:function(t,n,i){w("setWhiteBalanceRGB",n,function(){!1!==i.hasOwnProperty("rGain")||!1!==i.hasOwnProperty("gGain")||!1!==i.hasOwnProperty("bGain")?!0===i.hasOwnProperty("rGain")&&"number"!=typeof i.rGain||!0===i.hasOwnProperty("gGain")&&"number"!=typeof i.gGain||!0===i.hasOwnProperty("bGain")&&"number"!=typeof i.bGain?y.callFailureCallback(n,{},c.ERROR_CODE.COMMON.BAD_PARAMETERS,"Invalid parameters. r/g/bGain value type must be number."):s.webOSVersion<=3?F.getValue(C,[v],function(e){var a={};switch(e.pictureMode){case"normal":"number"==typeof i.rGain&&(a.rSubGainMedium=i.rGain),"number"==typeof i.gGain&&(a.gSubGainMedium=i.gGain),"number"==typeof i.bGain&&(a.bSubGainMedium=i.bGain);break;case"vivid":"number"==typeof i.rGain&&(a.rSubGainCool=i.rGain),"number"==typeof i.gGain&&(a.gSubGainCool=i.gGain),"number"==typeof i.bGain&&(a.bSubGainCool=i.bGain);break;case"cinema":"number"==typeof i.rGain&&(a.rSubGainWarm=i.rGain),"number"==typeof i.gGain&&(a.gSubGainWarm=i.gGain),"number"==typeof i.bGain&&(a.bSubGainWarm=i.bGain);break;default:return void y.callFailureCallback(n,{},c.ERROR_CODE.CONFIGURATION.INVALID_CONFIG,"This API supports only if picture mode is Vivid, Standard or Cinema.")}F.setValue(R,a,function(e){y.callSuccessCallback(t)},function(e){y.callFailureCallback(n,e,c.ERROR_CODE.COMMON.INTERNAL_ERROR,"Failed to set white balance settings.")})},function(e){y.callFailureCallback(n,errorObject,c.ERROR_CODE.COMMON.INTERNAL_ERROR,"Failed to set white balance settings.")}):F.getValue(C,[v],function(e){var a={};switch(e.pictureMode){case"normal":case"vivid":case"sports":case"game":case"govCorp":case"eco":"number"==typeof i.rGain&&(a.redOffset=i.rGain),"number"==typeof i.gGain&&(a.greenOffset=i.gGain),"number"==typeof i.bGain&&(a.blueOffset=i.bGain);break;default:return void y.callFailureCallback(n,{},c.ERROR_CODE.CONFIGURATION.INVALID_CONFIG,"This API is not supports when picture mode is Calibration.")}F.setValue(C,a,function(e){y.callSuccessCallback(t)},function(e){y.callFailureCallback(n,e,c.ERROR_CODE.COMMON.INTERNAL_ERROR,"Failed to set white balance settings.")})},function(e){y.callFailureCallback(n,e,c.ERROR_CODE.COMMON.INTERNAL_ERROR,"Failed to set white balance settings.")}):y.callFailureCallback(n,{},c.ERROR_CODE.COMMON.BAD_PARAMETERS,"Missing required parameters. At least one of rGain, gGain or bGain parameter should be used.")})},getWhiteBalanceRGB:function(n,i){w("getWhiteBalanceRGB",i,function(){s.webOSVersion<=3?F.getValue(C,[v],function(t){F.getValue(R,["rSubGainMedium","gSubGainMedium","bSubGainMedium","rSubGainCool","gSubGainCool","bSubGainCool","rSubGainWarm","gSubGainWarm","bSubGainWarm"],function(e){var a={};switch(t.pictureMode){case"normal":a.rGain=e.rSubGainMedium,a.gGain=e.gSubGainMedium,a.bGain=e.bSubGainMedium;break;case"vivid":a.rGain=e.rSubGainCool,a.gGain=e.gSubGainCool,a.bGain=e.bSubGainCool;break;case"cinema":a.rGain=e.rSubGainWarm,a.gGain=e.gSubGainWarm,a.bGain=e.bSubGainWarm;break;default:return void y.callFailureCallback(i,{},c.ERROR_CODE.CONFIGURATION.INVALID_CONFIG,"This API supports only if picture mode is Vivid, Standard or Cinema.")}"string"==typeof a.rGain&&(a.rGain=parseInt(a.rGain)),"string"==typeof a.gGain&&(a.gGain=parseInt(a.gGain)),"string"==typeof a.bGain&&(a.bGain=parseInt(a.bGain)),y.callSuccessCallback(n,a)},function(e){y.callFailureCallback(i,errorObject,c.ERROR_CODE.COMMON.INTERNAL_ERROR,"Failed to get white balance settings.")})}):F.getValue(C,[v,"redOffset","greenOffset","blueOffset"],function(e){var a={};switch(e.pictureMode){case"normal":case"vivid":case"sports":case"game":case"govCorp":case"eco":a.rGain=e.redOffset,a.gGain=e.greenOffset,a.bGain=e.blueOffset;break;default:return void y.callFailureCallback(i,{},c.ERROR_CODE.CONFIGURATION.INVALID_CONFIG,"This API is not supports when picture mode is Calibration.")}"string"==typeof a.rGain&&(a.rGain=parseInt(a.rGain)),"string"==typeof a.gGain&&(a.gGain=parseInt(a.gGain)),"string"==typeof a.bGain&&(a.bGain=parseInt(a.bGain)),y.callSuccessCallback(n,a)},function(e){y.callFailureCallback(i,e,c.ERROR_CODE.COMMON.INTERNAL_ERROR,"Failed to get white balance settings.")})})},setAvSync:function(a,t,e){w("setAvSync",t,function(){!1!==D.checkMissingParameters(e,["avSync"])?!1!==D.checkParametersValidation(c.AVSYNC,e,"avSync")?F.setValue(E,e,function(e){y.callSuccessCallback(a)},function(e){y.callFailureCallback(t,e,c.ERROR_CODE.COMMON.INTERNAL_ERROR,"Failed to set AvSync settings.")}):y.callFailureCallback(t,{},c.ERROR_CODE.COMMON.BAD_PARAMETERS,"Invalid parameters."):y.callFailureCallback(t,{},c.ERROR_CODE.COMMON.BAD_PARAMETERS,"Missing required parameters.")})},getAvSync:function(a,t){w("getAvSync",t,function(){F.getValue(E,[g],function(e){y.callSuccessCallback(a,{avSync:e.avSync})},function(e){y.callFailureCallback(t,e,c.ERROR_CODE.COMMON.INTERNAL_ERROR,"Failed to get AvSync status.")})})},setAvSyncSpeaker:function(a,t,e){w("setAvSyncSpeaker",t,function(){!1!==D.checkMissingParameters(e,["avSyncSpeaker"])?!1!==D.checkParametersValidation(c.AVSYNCSPEAKER,e,"avSyncSpeaker")?F.setValue(E,e,function(e){y.callSuccessCallback(a)},function(e){y.callFailureCallback(t,e,c.ERROR_CODE.COMMON.INTERNAL_ERROR,"Failed to set AvSync Speaker settings.")}):y.callFailureCallback(t,{},c.ERROR_CODE.COMMON.BAD_PARAMETERS,"Invalid parameters."):y.callFailureCallback(t,{},c.ERROR_CODE.COMMON.BAD_PARAMETERS,"Missing required parameters.")})},getAvSyncSpeaker:function(a,t){w("getAvSyncSpeaker",t,function(){F.getValue(E,[m],function(e){"string"==typeof e.avSyncSpeaker&&(e.avSyncSpeaker=parseInt(e.avSyncSpeaker)),y.callSuccessCallback(a,{avSyncSpeaker:e.avSyncSpeaker})},function(e){y.callFailureCallback(t,e,c.ERROR_CODE.COMMON.INTERNAL_ERROR,"Failed to get AvSync Speaker status.")})})},setAvSyncBypass:function(a,t,e){w("setAvSyncBypass",t,function(){!1!==D.checkMissingParameters(e,["avSyncBypassInput"])?!1!==D.checkParametersValidation(c.AVSYNCBYPASS,e,"avSyncBypassInput")?F.setValue(E,e,function(e){y.callSuccessCallback(a)},function(e){y.callFailureCallback(t,e,c.ERROR_CODE.COMMON.INTERNAL_ERROR,"Failed to set AvSync Bypass settings.")}):y.callFailureCallback(t,{},c.ERROR_CODE.COMMON.BAD_PARAMETERS,"Invalid parameters."):y.callFailureCallback(t,{},c.ERROR_CODE.COMMON.BAD_PARAMETERS,"Missing required parameters.")})},getAvSyncBypass:function(a,t){w("getAvSyncBypass",t,function(){F.getValue(E,[_],function(e){y.callSuccessCallback(a,{avSyncBypassInput:e.avSyncBypassInput})},function(e){y.callFailureCallback(t,e,c.ERROR_CODE.COMMON.INTERNAL_ERROR,"Failed to get AvSync Bypass status.")})})},setNoSignalImageStatus:function(a,t,e){w("setNoSignalImageStatus",t,function(){!1!==D.checkMissingParameters(e,["noSignalImage"])?!1!==D.checkParametersValidation(c.NOSIGNALIMAGE,e,"noSignalImage")?F.setValue(R,e,function(e){y.callSuccessCallback(a)},function(e){y.callFailureCallback(t,e,c.ERROR_CODE.COMMON.INTERNAL_ERROR,"Failed to set NoSignalImage status.")}):y.callFailureCallback(t,{},c.ERROR_CODE.COMMON.BAD_PARAMETERS,"Invalid parameters."):y.callFailureCallback(t,{},c.ERROR_CODE.COMMON.BAD_PARAMETERS,"Missing required parameters.")})},getNoSignalImageStatus:function(a,t){w("getNoSignalImageStatus",t,function(){F.getValue(R,[I],function(e){y.callSuccessCallback(a,{noSignalImage:e.noSignalImage})},function(e){y.callFailureCallback(t,e,c.ERROR_CODE.COMMON.INTERNAL_ERROR,"Failed to get NoSignalImage status.")})})},getPowerOnOffHistory:function(n,a){w("getPowerOnOffHistory",a,function(){F.getValue(R,[N],function(e){var a=e.powerOnOffHistory;for("string"==typeof e.powerOnOffHistory&&(a=JSON.parse(e.powerOnOffHistory));;){var t=a.indexOf(" ");if(-1===t)break;a.splice(t,1)}y.callSuccessCallback(n,{powerOnOffHistory:a})},function(e){y.callFailureCallback(a,e,c.ERROR_CODE.COMMON.INTERNAL_ERROR,"Failed to get Power On/Off history.")})})},setPowerOnStatus:function(a,t,e){w("setPowerOnStatus",t,function(){!1!==D.checkMissingParameters(e,["mode"])?!1!==D.checkParametersValidation(c.POWERONSTATUS,e,"mode")?F.setValue(O,{powerOnStatus:e.mode},function(e){y.callSuccessCallback(a)},function(e){y.callFailureCallback(t,e,c.ERROR_CODE.COMMON.INTERNAL_ERROR,"Failed to set Power On status.")}):y.callFailureCallback(t,{},c.ERROR_CODE.COMMON.BAD_PARAMETERS,"Invalid parameters."):y.callFailureCallback(t,{},c.ERROR_CODE.COMMON.BAD_PARAMETERS,"Missing required parameters.")})},getPowerOnStatus:function(a,t){w("getPowerOnStatus",t,function(){F.getValue(O,[M],function(e){y.callSuccessCallback(a,{powerOnStatus:e.powerOnStatus})},function(e){y.callFailureCallback(t,e,c.ERROR_CODE.COMMON.INTERNAL_ERROR,"Failed to get Power On status.")})})},setKAM:function(a,t,n){w("setKAM",t,function(){var e;if(!1!==D.checkMissingParameters(n,["keepAliveMode"])){if(!0===n.keepAliveMode)e="enable";else{if(!1!==n.keepAliveMode)return void y.callFailureCallback(t,{},c.ERROR_CODE.COMMON.BAD_PARAMETERS,"Invalid parameter. parameters.enable should be true or false.");e="disable"}F.setValue(R,{enableKAM:e},function(e){y.callSuccessCallback(a)},function(e){y.callFailureCallback(t,e,c.ERROR_CODE.COMMON.INTERNAL_ERROR,"Failed to set Keep Alive Mode settings.")})}else y.callFailureCallback(t,{},c.ERROR_CODE.COMMON.BAD_PARAMETERS,"Missing required parameters.")})},getKAM:function(a,t){w("getKAM",t,function(){F.getValue(R,[f],function(e){e=e[f];y.callSuccessCallback(a,{keepAliveMode:"enable"===e})},function(e){y.callFailureCallback(t,e,c.ERROR_CODE.COMMON.INTERNAL_ERROR,"Failed to get Keep Alive Mode settings.")})})},changePassword:function(l,r,o){w("changePassword",r,function(){var a,t,e,n=4;!1!==D.checkMissingParameters(o,["currentPassword","newPassword"])?(a=o.currentPassword,t=o.newPassword,"string"==typeof a&&"string"==typeof t?/(\w)\1\1\1\1\1/.test(t)?y.callFailureCallback(r,{},c.ERROR_CODE.COMMON.BAD_PARAMETERS,"Invalid parameter type. Same number repeated."):(4<=s.webOSVersion&&(n=6),e=function(){var e="";for(i=0;i<n;i++)e+="9";return parseInt(e)}(),t.length===n?parseInt(t)<0||parseInt(t)>e?y.callFailureCallback(r,{},c.ERROR_CODE.COMMON.BAD_PARAMETERS,"Invalid password format. Valid password value range is from "+function(){var e="";for(i=0;i<n;i++)e+="0";return e}()+" to "+e+"."):a!==t?3.2<=s.webOSVersion?F.getValueBySettingsService(p,[P],function(e){e[P]!==a&&""!==e[P]?y.callFailureCallback(r,{},c.ERROR_CODE.COMMON.INTERNAL_ERROR,"Incorrect password. Access denied."):F.setValueBySettingsService(p,{systemPin:t},function(){y.callSuccessCallback(l)},function(e){"function"==typeof r&&y.callFailureCallback(r,errorObject,c.ERROR_CODE.COMMON.INTERNAL_ERROR,"Failed to set new password.")})},function(e){y.callFailureCallback(r,e,c.ERROR_CODE.COMMON.INTERNAL_ERROR,"Failed to get current password from platform.")}):F.getValue(O,[d],function(e){e[d]!==a?y.callFailureCallback(r,{},c.ERROR_CODE.COMMON.INTERNAL_ERROR,"Incorrect password. Access denied."):F.setValue(O,{password:t},function(){var e,a;3.2<=s.webOSVersion?y.callSuccessCallback(l):(a="",a="0000"===t?"8080":(e=parseInt(t),("0000"+parseInt((e/10).toString())+((e+1)%10).toString()).substr(-4)),y.callSuccessCallback(l,{serverUIPassword:a}))},function(e){"function"==typeof r&&y.callFailureCallback(r,errorObject,c.ERROR_CODE.COMMON.INTERNAL_ERROR,"Failed to set new password.")})},function(e){y.callFailureCallback(r,e,c.ERROR_CODE.COMMON.INTERNAL_ERROR,"Failed to get current password from platform.")}):y.callFailureCallback(r,{},c.ERROR_CODE.COMMON.BAD_PARAMETERS,"Current and new password are same."):y.callFailureCallback(r,{},c.ERROR_CODE.COMMON.BAD_PARAMETERS,"Invalid password format. Password length should be "+n)):y.callFailureCallback(r,{},c.ERROR_CODE.COMMON.BAD_PARAMETERS,"Invalid parameter type.")):y.callFailureCallback(r,{},c.ERROR_CODE.COMMON.BAD_PARAMETERS,"Missing required parameters.")})},getNativePortraitMode:function(a,t){w("getNativePortraitMode",t,function(){3===s.webOSVersion?F.getValue(R,[b],function(e){y.callSuccessCallback(a,{nativePortrait:e[b]})},function(e){y.callFailureCallback(t,e,c.ERROR_CODE.COMMON.INTERNAL_ERROR,"Failed to get Native Portrait Mode settings.")}):3.2<=s.webOSVersion?F.getValue(u,[A],function(e){y.callSuccessCallback(a,{nativePortrait:e[A]})},function(e){y.callFailureCallback(t,e,c.ERROR_CODE.COMMON.INTERNAL_ERROR,"Failed to get Native Portrait Mode settings.")}):y.callFailureCallback(t,{},c.ERROR_CODE.COMMON.INTERNAL_ERROR,"Cannot get platform information yet. Try again later.")})},setNativePortraitMode:function(a,t,e){w("setNativePortraitMode",t,function(){!1!==D.checkMissingParameters(e,["nativePortrait"])?!1!==D.checkParametersValidation(c.NATIVEPORTRAIT,e,"nativePortrait")?3===s.webOSVersion?F.setValue(R,{siAppOrientation:e.nativePortrait},function(e){y.callSuccessCallback(a)},function(e){y.callFailureCallback(t,e,c.ERROR_CODE.COMMON.INTERNAL_ERROR,"Failed to set Native Portrait Mode settings.")}):3.2<=s.webOSVersion?F.setValue(u,{screenRotation:e.nativePortrait},function(e){y.callSuccessCallback(a)},function(e){y.callFailureCallback(t,e,c.ERROR_CODE.COMMON.INTERNAL_ERROR,"Failed to set Native Portrait Mode settings.")}):y.callFailureCallback(t,{},c.ERROR_CODE.COMMON.INTERNAL_ERROR,"Cannot get platform information yet. Try again later."):y.callFailureCallback(t,{},c.ERROR_CODE.COMMON.BAD_PARAMETERS,"Invalid parameters."):y.callFailureCallback(t,{},c.ERROR_CODE.COMMON.BAD_PARAMETERS,"Missing required parameters.")})},getWoWLAN:function(a,t){w("getWoWLAN",t,function(){F.getValue(r,[S],function(e){e="true"===e[S];y.callSuccessCallback(a,{enableWoWLAN:e})},function(e){y.callFailureCallback(t,e,c.ERROR_CODE.COMMON.INTERNAL_ERROR,"Failed to get WoWLAN settings.")})})},setWoWLAN:function(e,a,t){w("setWoWLAN",a,function(){!1!==D.checkMissingParameters(t,["enableWoWLAN"])?"boolean"==typeof t.enableWoWLAN?F.setValue(r,{wolwowlOnOff:t.enableWoWLAN.toString()},function(){y.callSuccessCallback(e)},function(e){y.callFailureCallback(a,e,c.ERROR_CODE.COMMON.INTERNAL_ERROR,"Failed to set WoWLAN settings.")}):y.callFailureCallback(a,{},c.ERROR_CODE.COMMON.BAD_PARAMETERS,"enableWoWLAN property value must be true or false boolean value."):y.callFailureCallback(a,{},c.ERROR_CODE.COMMON.BAD_PARAMETERS,"Missing required parameters.")})}},c.prototype.Signage={enableScreenShareApp:function(a,t,n){w("enableScreenShareApp",t,function(){var e;!1!==D.checkMissingParameters(n,["enable"])?("boolean"!=typeof n.enable&&y.callFailureCallback(t,{},c.ERROR_CODE.COMMON.BAD_PARAMETERS,"Invalid parameters."),e={},!0===n.enable?e.enableScreenShare="on":e.enableScreenShare="off",F.setValue(R,e,function(){y.callSuccessCallback(a)},function(e){y.callFailureCallback(t,e,c.ERROR_CODE.COMMON.INTERNAL_ERROR,"Failed to set enable of Screen Share application.")})):y.callFailureCallback(t,{},c.ERROR_CODE.COMMON.BAD_PARAMETERS,"Missing required parameters.")})},addUSBAttachEventListener:function(i,e){w("addUSBAttachEventListener",e,function(){l.USBAttachEventListener=o.Request("luna://com.webos.service.attachedstoragemanager",{method:"listDevices",parameters:{subscribe:!0},onSuccess:function(e){var a=[];if(e.devices)for(var t=0;t<e.devices.length;t++){var n=e.devices[t];"usb"!==n.deviceType&&"sdcard"!==n.deviceType||a.push({type:n.deviceType,vendor:n.vendorName,device:n.deviceName})}y.callSuccessCallback(i,{deviceList:a})},onFailure:function(){y.callFailureCallback(e,{},c.ERROR_CODE.COMMON.INTERNAL_ERROR,"Cannot get USB device information.")}})})},removeUSBAttachEventListener:function(e,a){w("removeUSBAttachEventListener",a,function(){null===l.USBAttachEventListener?y.callFailureCallback(a,{},c.ERROR_CODE.COMMON.INTERNAL_ERROR,"Event listener is not set. Use addUSBAttachEventListener() first."):(l.USBAttachEventListener.cancel(),y.callSuccessCallback(e))})},getwebOSVersion:function(e,a){w("getwebOSVersion",a,function(){-2===s.webOSVersion?y.callFailureCallback(a,{},c.ERROR_CODE.COMMON.INTERNAL_ERROR,"Cannot get platform information yet. Please try later."):-1!==s.webOSVersion&&"number"==typeof s.webOSVersion?y.callSuccessCallback(e,{webOSVersion:s.webOSVersion.toFixed(1)}):y.callFailureCallback(a,{},c.ERROR_CODE.COMMON.INTERNAL_ERROR,"Cannot get platform information.")})},getApplicationInfo:function(a,t){w("getApplicationInfo",t,function(){var e;(function(){if(window.PalmSystem)return PalmSystem.identifier.split(" ")[0];var e=location.href;return-1!==e.indexOf(c.APPLICATION.IPK_TYPE)?c.APPLICATION.IPK_TYPE:-1!==e.indexOf(c.APPLICATION.ZIP_TYPE+".debug")?c.APPLICATION.ZIP_TYPE+".debug":-1!==e.indexOf(c.APPLICATION.ZIP_TYPE)?c.APPLICATION.ZIP_TYPE:"__UNKNOWN__"})()===c.APPLICATION.IPK_TYPE?((e=new XMLHttpRequest).onreadystatechange=function(){if(4==this.readyState)try{var e=JSON.parse(this.responseText);y.callSuccessCallback(a,e)}catch(e){y.callFailureCallback(t,{},c.ERROR_CODE.COMMON.INTERNAL_ERROR,"Failed to get application information.")}},e.onerror=function(e){y.callFailureCallback(t,{},c.ERROR_CODE.COMMON.INTERNAL_ERROR,"Failed to get application information.")},e.open("GET","appinfo.json",!0),e.send()):y.callFailureCallback(t,{},c.ERROR_CODE.COMMON.INTERNAL_ERROR,"This application is not IPK type.")})},switchApplication:function(i,l,r){w("switchApplication",l,function(){var t,n;!1!==D.checkMissingParameters(r,["application"])?(6<=s.webOSVersion&&r.application===c.APPLICATION.SCREEN_SHARE&&(c.APPLICATION.SCREEN_SHARE="com.webos.app.commercial.miracastguide",r.application=c.APPLICATION.SCREEN_SHARE),"string"==typeof r.application&&!1!==D.checkParametersValidation(c.APPLICATION,r,"application")?(t=function(a){var t,n;t=function(e){!0===e&&(c.APPLICATION.ZIP_TYPE+=".debug"),o.Request("luna://com.webos.applicationManager",{method:"launch",parameters:{id:r.application,params:{path:a}},onSuccess:function(){y.callSuccessCallback(i)},onFailure:function(e){-101===e.errorCode?y.callFailureCallback(l,{},c.ERROR_CODE.APPLICATION.NOT_INSTALLED,"Application is not installed."):y.callFailureCallback(l,e,c.ERROR_CODE.COMMON.INTERNAL_ERROR,"Failed to launch target application.")}})},n=function(e){y.callFailureCallback(l,e,c.ERROR_CODE.COMMON.INTERNAL_ERROR,"Failed to get application information.")},o.Request("palm://com.palm.service.devmode",{method:"getDevMode",parameters:{},onSuccess:function(e){t(e.enabled)},onFailure:function(e){n(e)}})},n=function(e){y.callFailureCallback(l,e,c.ERROR_CODE.COMMON.INTERNAL_ERROR,"Failed to get application launch settings.")},F.getValue(R,["serverIpPort","siServerIp","secureConnection","appLaunchMode","fqdnAddr","fqdnMode"],function(e){var a="";"none"===e.appLaunchMode?n({errorCode:c.ERROR_CODE.APPLICATION.SETTINGS_ERROR,errorText:"Application launch mode is NONE. Set SI Server settings first."}):"local"===e.appLaunchMode?a="file:////mnt/lg/appstore/scap/procentric/scap/application/app/index.html":"usb"===e.appLaunchMode?a="file:////tmp/usb/sda/sda/index.html":"remote"===e.appLaunchMode?"on"===e.fqdnMode?a=e.fqdnAddr:"off"===e.fqdnMode?"on"===e.secureConnection?a+="http://"+e.siServerIp+":"+e.serverIpPort+"/procentric/scap/application/index.html":"on"===e.secureConnection?a+="https://"+e.siServerIp+":"+e.serverIpPort+"/procentric/scap/application/index.html":n({errorCode:c.ERROR_CODE.COMMON.INTERNAL_ERROR,errorText:"Failed to get application installation settings."}):n({errorCode:c.ERROR_CODE.COMMON.INTERNAL_ERROR,errorText:"Failed to get application installation settings."}):n({errorCode:c.ERROR_CODE.COMMON.INTERNAL_ERROR,errorText:"Failed to get application installation settings."}),t(a)},function(e){n(e)})):y.callFailureCallback(l,{},c.ERROR_CODE.COMMON.BAD_PARAMETERS,"Invalid application.")):y.callFailureCallback(l,{},c.ERROR_CODE.COMMON.BAD_PARAMETERS,"Missing required parameters.")})},disableApplication:function(a,t,n){w("disableApplication",t,function(){var e={appLaunchMode:"none"};if(!0===D.checkMissingParameters(n,["reset"])){if("boolean"!=typeof n.reset)return void y.callFailureCallback(t,{},c.ERROR_CODE.COMMON.BAD_PARAMETERS,"reset property value must be true or false boolean value, if use this property.");!0===n.reset&&(e.siServerIp="0.0.0.0",e.serverIpPort="0",e.secureConnection="off",e.appType="zip",e.fqdnMode="off",e.fqdnAddr="http://")}else y.callFailureCallback(t,{},c.ERROR_CODE.COMMON.BAD_PARAMETERS,"Application will be disabled after reboot only if reset property is true.");F.setValue(R,e,function(){y.callSuccessCallback(a)},function(e){y.callFailureCallback(t,e,c.ERROR_CODE.COMMON.INTERNAL_ERROR,"Failed to disable application.")})})}},c.prototype.VideoSync={setMaster:function(n,i,l){w("setMaster",i,function(){if(!1!==D.checkMissingParameters(l,["ip","port"]))if("object"!=typeof l||"string"!=typeof l.ip||"number"!=typeof l.port||isNaN(l.port))y.callFailureCallback(i,{},c.ERROR_CODE.COMMON.BAD_PARAMETERS,"Invalid parameters.");else{var e=l.ip.split(".");if(4===e.length){for(var a=0;a<4;a++){var t=parseInt(e[a]);if(t<0||255<t)return void y.callFailureCallback(i,{},c.ERROR_CODE.COMMON.BAD_PARAMETERS,"Invalid IP format.")}l.port<0||65535<l.port?y.callFailureCallback(i,{},c.ERROR_CODE.COMMON.BAD_PARAMETERS,"Invalid port value."):h(function(e){o.Request("luna://com.webos.media",{method:"setMaster",parameters:{mediaId:e,ip:l.ip,port:l.port},onSuccess:function(e){y.callSuccessCallback(n,{basetime:e.basetime})},onFailure:function(e){y.callFailureCallback(i,e,c.ERROR_CODE.COMMON.INTERNAL_ERROR,"Failed to set master.")}})},function(e){y.callFailureCallback(i,e,c.ERROR_CODE.COMMON.MEDIA_ERROR,"Failed to get loaded media information.")},{videoEl:l.videoElement})}else y.callFailureCallback(i,{},c.ERROR_CODE.COMMON.BAD_PARAMETERS,"Invalid IP format.")}else y.callFailureCallback(i,{},c.ERROR_CODE.COMMON.BAD_PARAMETERS,"Missing required parameters.")})},setSlave:function(n,i,l){w("setSlave",i,function(){if(!1!==D.checkMissingParameters(l,["ip","port","basetime"]))if("object"!=typeof l||"string"!=typeof l.ip||"number"!=typeof l.port||isNaN(l.port))y.callFailureCallback(i,{},c.ERROR_CODE.COMMON.BAD_PARAMETERS,"Invalid parameters.");else{var e=l.ip.split(".");if(4===e.length){for(var a=0;a<4;a++){var t=parseInt(e[a]);if(t<0||255<t)return void y.callFailureCallback(i,{},c.ERROR_CODE.COMMON.BAD_PARAMETERS,"Invalid IP format.")}l.port<0||65535<l.port?y.callFailureCallback(i,{},c.ERROR_CODE.COMMON.BAD_PARAMETERS,"Invalid port value."):parseInt(l.basetime<0)?y.callFailureCallback(i,{},c.ERROR_CODE.COMMON.BAD_PARAMETERS,"Invalid basetime value."):h(function(e){o.Request("luna://com.webos.media",{method:"setSlave",parameters:{mediaId:e,ip:l.ip,port:l.port,basetime:l.basetime},onSuccess:function(){y.callSuccessCallback(n)},onFailure:function(e){y.callFailureCallback(i,e,c.ERROR_CODE.COMMON.INTERNAL_ERROR,"Failed to set slave.")}})},function(e){y.callFailureCallback(i,e,c.ERROR_CODE.COMMON.MEDIA_ERROR,"Failed to get loaded media information.")},{videoEl:l.videoElement})}else y.callFailureCallback(i,{},c.ERROR_CODE.COMMON.BAD_PARAMETERS,"Invalid IP format.")}else y.callFailureCallback(i,{},c.ERROR_CODE.COMMON.BAD_PARAMETERS,"Missing required parameters.")})}},t.exports=c}),Custom=cordova.require("cordova/plugin/custom");
